<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" 
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.xier.sesame.attence.SwitchSetting">
			
	<resultMap id="SwitchSettingResultMap" type="com.xier.sesame.attence.domain.SwitchSetting">
	<result column="switch_setting_id" property="switchSettingId" />
	<result column="org_id" property="orgId" />
	<result column="attence_switch" property="attenceSwitch" />
	<result column="stanger_switch" property="stangerSwitch" />
	<result column="open_week_days" property="openWeekDays" />
	<result column="day_begin_time" property="dayBeginTime" />
	<result column="day_end_time" property="dayEndTime" />
	<result column="gmt_create" property="gmtCreate" />
	<result column="gmt_modify" property="gmtModify" />
	</resultMap>
	
	<insert id="addSwitchSetting" parameterType="com.xier.sesame.attence.domain.SwitchSetting">

		insert into attence_switch_setting(
			switch_setting_id,
			org_id,
			attence_switch,
			stanger_switch,
			open_week_days,
			day_begin_time,
			day_end_time,
			gmt_create,
			gmt_modify	
		)
		values (
		 	#{switchSettingId},
			#{orgId},
			#{attenceSwitch},
			#{stangerSwitch},
			#{openWeekDays},
			#{dayBeginTime},
			#{dayEndTime},
			now(3),
			now(3)
		)
	</insert>
	
	<update id="updateSwitchSetting" parameterType="com.xier.sesame.attence.domain.SwitchSetting">
		update attence_switch_setting
		set
			attence_switch=#{attenceSwitch},
			stanger_switch=#{stangerSwitch},
			open_week_days=#{openWeekDays},
			day_begin_time=#{dayBeginTime},
			day_end_time=#{dayEndTime},
			gmt_modify = now(3)
		where
			switch_setting_id = #{switchSettingId}
			and org_id=#{orgId}
	</update>
	
	<update id="updateSwitchSettingSelective" parameterType="com.xier.sesame.attence.domain.SwitchSetting">
		update attence_switch_setting
		<set>
		<if test="attenceSwitch != null">
			attence_switch=#{attenceSwitch},
		</if>
		<if test="stangerSwitch != null">
			stanger_switch=#{stangerSwitch},
		</if>
		<if test="openWeekDays != null">
			open_week_days=#{openWeekDays},
		</if>
		<if test="dayBeginTime != null">
			day_begin_time=#{dayBeginTime},
		</if>
		<if test="dayEndTime != null">
			day_end_time=#{dayEndTime},
		</if>
			gmt_modify = now(3)
		</set>
		where
			switch_setting_id = #{switchSettingId}
			and org_id=#{orgId}
	</update>
   
 	<select id="getSwitchSettingById" parameterType="com.xier.sesame.attence.domain.SwitchSetting" resultMap="SwitchSettingResultMap">
		<include refid="sql_select"/>
		from attence_switch_setting
		where 
			switch_setting_id = #{switchSettingId}
			and org_id=#{orgId}
	</select>
	
 	<select id="getSwitchSettingByIdForUpdate" parameterType="com.xier.sesame.attence.domain.SwitchSetting" resultMap="SwitchSettingResultMap">
<include refid="sql_select"/>
		from attence_switch_setting
		where 
			switch_setting_id = #{switchSettingId}
			and org_id=#{orgId}
	for update
	</select>
		
	<delete id="removeSwitchSettingById" parameterType="com.xier.sesame.attence.domain.SwitchSetting">
		delete from attence_switch_setting
		where
		switch_setting_id = #{switchSettingId}
		and org_id=#{orgId}
 	</delete>
 	
	<select id="getPaginationSwitchSetting" resultMap="SwitchSettingResultMap" parameterType="map" >
<include refid="sql_select"/>			
<include refid="sql_where"/>
			order by gmt_modify desc
			 	limit #{startRow}, #{pageSize}
	</select>
  
	<select id="getSwitchSettingCount" resultType="int" parameterType="com.xier.sesame.attence.domain.SwitchSetting" >
		select 
			count(*)		
<include refid="sql_where"/>
	</select>



    <select id="getSwitchSettingByOrgId" parameterType="map" resultMap="SwitchSettingResultMap">
		<include refid="sql_select"/>
		from attence_switch_setting
		where 
			org_id=#{orgId}
	</select>



	
	<sql id="sql_where">
	    from attence_switch_setting
	    <where>
    	<if test="switchSettingId != null">
		      switch_setting_id = #{switchSettingId}
		</if>
		<if test="orgId != null">
		      and org_id = #{orgId}
		</if>
		<if test="attenceSwitch != null">
		      and attence_switch = #{attenceSwitch}
		</if>
		<if test="stangerSwitch != null">
		      and stanger_switch = #{stangerSwitch}
		</if>
		<if test="openWeekDays != null">
		      and open_week_days = #{openWeekDays}
		</if>
		<if test="dayBeginTime != null">
		      and day_begin_time = #{dayBeginTime}
		</if>
		<if test="dayEndTime != null">
		      and day_end_time = #{dayEndTime}
		</if>
		</where>
	</sql>  	
	
	<sql id="sql_select">
		select
			switch_setting_id,
			org_id,
			attence_switch,
			stanger_switch,
			open_week_days,
			day_begin_time,
			day_end_time,
			gmt_create,
			gmt_modify	
	</sql>  
</mapper>