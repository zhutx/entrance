<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//ibatis.apache.org//DTD Mapper 3.0//EN" 
"http://ibatis.apache.org/dtd/ibatis-3-mapper.dtd">
<mapper namespace="com.xier.sesame.attence.DeviceConfig">
			
	<resultMap id="DeviceConfigResultMap" type="com.xier.sesame.attence.domain.DeviceConfig">
	<result column="device_config_id" property="deviceConfigId" />
	<result column="org_id" property="orgId" />
	<result column="biz_version" property="bizVersion" />
	<result column="card_reader_type" property="cardReaderType" />
	<result column="card_reader_vender" property="cardReaderVender" />
	<result column="face_detected_service" property="faceDetectedService" />
	<result column="face_detected_service_url" property="faceDetectedServiceUrl" />
	<result column="face_detected_service_threshold" property="faceDetectedServiceThreshold" />
	<result column="face_detected_minbrightness" property="faceDetectedMinbrightness" />
	<result column="face_detected_maxbrightness" property="faceDetectedMaxbrightness" />
	<result column="face_detected_gaussianblur" property="faceDetectedGaussianblur" />
	<result column="face_detected_motionblur" property="faceDetectedMotionblur" />
	<result column="face_detected_minfacesize" property="faceDetectedMinfacesize" />
	<result column="face_detected_recogtype" property="faceDetectedRecogtype" />
	<result column="camera_type" property="cameraType" />
	<result column="gpio_type" property="gpioType" />
	<result column="gpio_value" property="gpioValue" />
	</resultMap>
	
	<insert id="addDeviceConfig" parameterType="com.xier.sesame.attence.domain.DeviceConfig">

		insert into attence_device_config(
			device_config_id,
			org_id,
			biz_version,
			card_reader_type,
			card_reader_vender,
			face_detected_service,
			face_detected_service_url,
			face_detected_service_threshold,
			face_detected_minbrightness,
			face_detected_maxbrightness,
			face_detected_gaussianblur,
			face_detected_motionblur,
			face_detected_minfacesize,
			face_detected_recogtype,
			camera_type,
			gpio_type,
			gpio_value,
			gmt_create,
			gmt_modify	
		)
		values (
		 	#{deviceConfigId},
			#{orgId},
			#{bizVersion},
			#{cardReaderType},
			#{cardReaderVender},
			#{faceDetectedService},
			#{faceDetectedServiceUrl},
			#{faceDetectedServiceThreshold},
			#{faceDetectedMinbrightness},
			#{faceDetectedMaxbrightness},
			#{faceDetectedGaussianblur},
			#{faceDetectedMotionblur},
			#{faceDetectedMinfacesize},
			#{faceDetectedRecogtype},
			#{cameraType},
			#{gpioType},
			#{gpioValue},
			now(3),
			now(3)
		)
	</insert>
	
	<update id="updateDeviceConfig" parameterType="com.xier.sesame.attence.domain.DeviceConfig">
		update attence_device_config
		set
			org_id=#{orgId},
			biz_version=#{bizVersion},
			card_reader_type=#{cardReaderType},
			card_reader_vender=#{cardReaderVender},
			face_detected_service=#{faceDetectedService},
			face_detected_service_url=#{faceDetectedServiceUrl},
			face_detected_service_threshold=#{faceDetectedServiceThreshold},
			face_detected_minbrightness=#{faceDetectedMinbrightness},
			face_detected_maxbrightness=#{faceDetectedMaxbrightness},
			face_detected_gaussianblur=#{faceDetectedGaussianblur},
			face_detected_motionblur=#{faceDetectedMotionblur},
			face_detected_minfacesize=#{faceDetectedMinfacesize},
			face_detected_recogtype=#{faceDetectedRecogtype},
			camera_type=#{cameraType},
			gpio_type=#{gpioType},
			gpio_value=#{gpioValue},
			gmt_modify = now(3)
		where
			device_config_id = #{deviceConfigId}
	</update>
	
	<update id="updateDeviceConfigSelective" parameterType="com.xier.sesame.attence.domain.DeviceConfig">
		update attence_device_config
		<set>
		<if test="orgId != null">
			org_id=#{orgId},
		</if>
		<if test="bizVersion != null">
			biz_version=#{bizVersion},
		</if>
		<if test="cardReaderType != null">
			card_reader_type=#{cardReaderType},
		</if>
		<if test="cardReaderVender != null">
			card_reader_vender=#{cardReaderVender},
		</if>
		<if test="faceDetectedService != null">
			face_detected_service=#{faceDetectedService},
		</if>
		<if test="faceDetectedServiceUrl != null">
			face_detected_service_url=#{faceDetectedServiceUrl},
		</if>
		<if test="faceDetectedServiceThreshold != null">
			face_detected_service_threshold=#{faceDetectedServiceThreshold},
		</if>
		<if test="faceDetectedMinbrightness != null">
			face_detected_minbrightness=#{faceDetectedMinbrightness},
		</if>
		<if test="faceDetectedMaxbrightness != null">
			face_detected_maxbrightness=#{faceDetectedMaxbrightness},
		</if>
		<if test="faceDetectedGaussianblur != null">
			face_detected_gaussianblur=#{faceDetectedGaussianblur},
		</if>
		<if test="faceDetectedMotionblur != null">
			face_detected_motionblur=#{faceDetectedMotionblur},
		</if>
		<if test="faceDetectedMinfacesize != null">
			face_detected_minfacesize=#{faceDetectedMinfacesize},
		</if>
		<if test="faceDetectedRecogtype != null">
			face_detected_recogtype=#{faceDetectedRecogtype},
		</if>
		<if test="cameraType != null">
			camera_type=#{cameraType},
		</if>
		<if test="gpioType != null">
			gpio_type=#{gpioType},
		</if>
		<if test="gpioValue != null">
			gpio_value=#{gpioValue},
		</if>
			gmt_modify = now(3)
		</set>
		where
			device_config_id = #{deviceConfigId}
	</update>
   
 	<select id="getDeviceConfigById" parameterType="long" resultMap="DeviceConfigResultMap">
<include refid="sql_select"/>
		from attence_device_config
		where 
			device_config_id = #{deviceConfigId}
	</select>
	
 	<select id="getDeviceConfigByIdForUpdate" parameterType="long" resultMap="DeviceConfigResultMap">
<include refid="sql_select"/>
		from attence_device_config
		where 
			device_config_id = #{deviceConfigId}
	for update
	</select>
		
	<delete id="removeDeviceConfigById" parameterType="long">
		delete from attence_device_config
		where
		device_config_id = #{deviceConfigId}
 	</delete>
 	
	<select id="getPaginationDeviceConfig" resultMap="DeviceConfigResultMap" parameterType="map" >
<include refid="sql_select"/>			
<include refid="sql_where"/>
			order by gmt_modify desc
			 	limit #{startRow}, #{pageSize}
	</select>
  
	<select id="getDeviceConfigCount" resultType="int" parameterType="com.xier.sesame.attence.domain.DeviceConfig" >
		select 
			count(*)		
<include refid="sql_where"/>
	</select>


	<select id="getDeviceConfig" resultMap="DeviceConfigResultMap" parameterType="com.xier.sesame.attence.domain.DeviceConfig" >
		<include refid="sql_select"/>			
		<include refid="sql_where"/>
	</select>





	
	<sql id="sql_where">
	    from attence_device_config
	    <where>
    	<if test="deviceConfigId != null">
		      device_config_id = #{deviceConfigId}
		</if>
		<if test="orgId != null">
		      and org_id = #{orgId}
		</if>
		<if test="bizVersion != null">
		      and biz_version = #{bizVersion}
		</if>
		<if test="cardReaderType != null">
		      and card_reader_type = #{cardReaderType}
		</if>
		<if test="cardReaderVender != null">
		      and card_reader_vender = #{cardReaderVender}
		</if>
		<if test="faceDetectedService != null">
		      and face_detected_service = #{faceDetectedService}
		</if>
		<if test="faceDetectedServiceUrl != null">
		      and face_detected_service_url = #{faceDetectedServiceUrl}
		</if>
		<if test="faceDetectedServiceThreshold != null">
		      and face_detected_service_threshold = #{faceDetectedServiceThreshold}
		</if>
		<if test="faceDetectedMinbrightness != null">
		      and face_detected_minbrightness = #{faceDetectedMinbrightness}
		</if>
		<if test="faceDetectedMaxbrightness != null">
		      and face_detected_maxbrightness = #{faceDetectedMaxbrightness}
		</if>
		<if test="faceDetectedGaussianblur != null">
		      and face_detected_gaussianblur = #{faceDetectedGaussianblur}
		</if>
		<if test="faceDetectedMotionblur != null">
		      and face_detected_motionblur = #{faceDetectedMotionblur}
		</if>
		<if test="faceDetectedMinfacesize != null">
		      and face_detected_minfacesize = #{faceDetectedMinfacesize}
		</if>
		<if test="faceDetectedRecogtype != null">
		      and face_detected_recogtype = #{faceDetectedRecogtype}
		</if>
		<if test="cameraType != null">
		      and camera_type = #{cameraType}
		</if>
		<if test="gpioType != null">
		      and gpio_type = #{gpioType}
		</if>
		<if test="gpioValue != null">
		      and gpio_value = #{gpioValue}
		</if>
		</where>
	</sql>  	
	
	<sql id="sql_select">
		select
			device_config_id,
			org_id,
			biz_version,
			card_reader_type,
			card_reader_vender,
			face_detected_service,
			face_detected_service_url,
			face_detected_service_threshold,
			face_detected_minbrightness,
			face_detected_maxbrightness,
			face_detected_gaussianblur,
			face_detected_motionblur,
			face_detected_minfacesize,
			face_detected_recogtype,
			camera_type,
			gpio_type,
			gpio_value	
	</sql>  
</mapper>